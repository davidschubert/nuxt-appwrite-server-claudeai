// middleware/auth.ts
export default defineNuxtRouteMiddleware((to, from) => {
    const user = false;

    if (process.server) {
        // Serverseitige Logik
        const event = useRequestEvent();
        console.log(
            "(middleware/authy.ts) Server: event.context.auth",
            event.context.auth
        );
        console.log(
            "(middleware/authy.ts) Middleware Normal 2:",
            event.context.auth.user
        );

        if (!event.context.auth) {
            console.log(
                "(middleware/authy.ts) Server: User not logged in. go to login page"
            );
            //return navigateTo("/login");
        }
    } else {
        // Clientseitige Logik
        if (!user.value) {
            console.log(
                "(middleware/authy.ts) Client: User not logged in. go to login page"
            );
            //return navigateTo("/login");
        }
    }
});
